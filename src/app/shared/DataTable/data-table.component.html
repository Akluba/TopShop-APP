<div class="ui segments">
    <div class="ui horizontal segments">
        <div class="ui center aligned segment">
            <div class="ui top attached label">
                <i class="toggle on icon"></i>
                Toggle Columns
            </div>
            <div>
                <p-multiSelect [options]="toggleColumns" [(ngModel)]="tableColumns"></p-multiSelect>
            </div>
        </div>
        <div class="ui center aligned segment">
            <div class="ui top attached label">
                <i class="filter icon"></i>
                Filter
            </div>
            <div class="ui input">
                <input type="text" pInputText placeholder="all fields.." (input)="dt.filterGlobal($event.target.value, 'contains')">
            </div>
        </div>
        <div class="ui center aligned segment">
            <div class="ui top attached label">
                <i class="file excel outline icon"></i>
                Export
            </div>
            <div class="ui buttons">
                <button class="ui primary button" (click)="dt.exportCSV({selectionOnly:true})"
                    [disabled]="!selectedData || selectedData?.length==0">
                    Selected
                </button>
                <div class="or"></div>
                <button class="ui primary button" (click)="dt.exportCSV()">
                    All
                </button>
            </div>
        </div>
        <div class="ui center aligned segment">
            <div class="ui top attached label">
                <i class="plus icon"></i>
                Create
            </div>
            <div>
                <!-- <shop-create></shop-create> -->
            </div>
        </div>
    </div>
    <div class="ui secondary segment">
        <p-table #dt
            [columns]='tableColumns'
            [value]="data"
            [sortField]="'name'"
            [(selection)]="selectedData"
            [scrollable]="true"
            [style]="{width:'100%'}">
            <!-- Scrollable Table Settings -->
            <ng-template pTemplate="colgroup" let-columns>
                <colgroup>
                    <col style="width:2.25em">
                    <col style="width:250px">
                    <col *ngFor="let col of columns" style="width:250px">
                </colgroup>
            </ng-template>

            <!-- Column Functionality -->
            <ng-template pTemplate="header" let-columns>
                <!-- Sortable Columns -->
                <tr>
                    <th style="width: 2.25em">
                        <p-tableHeaderCheckbox></p-tableHeaderCheckbox>
                    </th>
                    <th [pSortableColumn]="'name'">Name
                        <p-sortIcon [field]="'name'"></p-sortIcon>
                    </th>
                    <th *ngFor="let col of columns" [pSortableColumn]="col.field">
                        {{ col.header }}
                        <p-sortIcon [field]="col.field"></p-sortIcon>
                    </th>
                </tr>
                <!-- Field Filters -->
                <tr>
                    <th></th>
                    <th class="ui fluid input">
                        <input pInputText type="text" (input)="dt.filter($event.target.value, 'name')" />
                    </th>
                    <th *ngFor="let col of columns" [ngSwitch]='col.type'>
                        <div class="ui fluid input" *ngSwitchCase="'text'">
                            <input type="text" (input)="dt.filter($event.target.value, col.field, col.filterMatchMode)"/>
                        </div>
                        <p-dropdown *ngSwitchCase="'select'" [options]="col.options" appendTo="body" [style]="{'width':'100%'}" (onChange)="dt.filter($event.value, col.field, 'equals')"></p-dropdown>
                        <p-multiSelect *ngSwitchCase="'select_multiple'" [options]="col.options" appendTo="body" defaultLabel="All Options" [style]="{'width':'100%'}" (onChange)="dt.filter($event.value, col.field, 'in')"></p-multiSelect>

                        <div *ngSwitchCase="'checkbox'">
                            {{ custom_5Filter }}
                            <p-checkbox binary="true" value="{{ custom_5Filter }}" (onChange)="custom_5Filter=$event; dt.filter($event, col.field, 'equals')"></p-checkbox>
                            <i class="fa fa-close" (click)="custom_5Filter=null; dt.filter(null, col.field, col.filterMatchMode)" style="cursor:pointer"> Show All</i>
                        </div>
                    </th>
                </tr>
            </ng-template>

            <!-- Row Data -->
            <ng-template pTemplate="body" let-data>
                <!-- Selectable Row -->
                <tr [pSelectableRow]="data">
                    <td><p-tableCheckbox [value]="data"></p-tableCheckbox></td>
                    <td>{{ data.name }}</td>
                    <td *ngFor="let col of tableColumns">
                        {{ data[col.field] }}
                    </td>
                </tr>
            </ng-template>

            <!-- Empty Results Message -->
            <ng-template pTemplate="emptymessage" let-data>
                <tr>
                    <td attr.colspan="{{ data.length + 2 }}">No Matches Found</td>
                </tr>
            </ng-template>
        </p-table>
    </div>
</div>